{% assign item = include.item %}

<!-- Desktop layout -->
<div class="d-none d-md-block">
  <div class="row no-gutters {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray">
    <div class="col-md-3 col-xl-2 mb-md-0 p-md-3">
      {% if item.cover %}
        <img 
          data-src="{{ item.cover | relative_url }}" 
          alt="{{ item.title }}" 
          class="lazy w-100 rounded-sm"
          src="{{ '/assets/images/empty_300x200.png' | relative_url }}"
        >
      {% else %}
        <svg 
          class="bubble-visual-hash lazy w-100 rounded-sm" 
          data-bubble-visual-hash="{{ item.id }}" 
          viewBox="0 0 300 200"
        ></svg>
      {% endif %}
    </div>

    <div class="col-md-9 col-xl-10 p-3 pl-md-0">
      <h5 class="mt-0 mb-1 font-weight-normal">{{ item.title }}</h5>

      {% if item.authors %}
        <p class="mt-0 mb-0 small">{% include widgets/author_list.html authors=item.authors %}</p>
      {% endif %}

      {% if item.notes %}
        <p class="mt-0 mb-0 small font-italic text-black">{{ item.notes }}</p>
      {% endif %}

      {% if item.abstract %}
        <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
          <a href="javascript:void(0);" onclick="this.closest('p').nextElementSibling.classList.toggle('d-none')">
            [Show/hide abstract]
          </a>
        </p>
        <p class="mt-1 mb-1 small text-muted" style="text-align: justify;">
          {{ item.abstract }}
        </p>
      {% endif %}

      {% if item.links %}
        <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
          {% for link in item.links %}
            {% assign link_value = link[1] %}
            {% if link_value.url %}
              <a target="{{ link_value.target | default: '_blank' }}" href="{{ link_value.url }}">[{{ link[0] }}]</a>
            {% else %}
              <a target="_blank" href="{{ link_value }}">[{{ link[0] }}]</a>
            {% endif %}
          {% endfor %}
        </p>
      {% endif %}
    </div>
  </div>
</div>

<!-- Mobile layout -->
<div 
  class="row no-gutters d-md-none {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray 
  {% if include.first %}rounded-xl-top{% endif %} 
  {% if include.last %}rounded-xl-bottom{% endif %} 
  {% if item.cover %}lazy{% endif %}" 
  data-src="{{ item.cover | relative_url }}"
>
  <div 
    class="w-100 {% if include.first %}rounded-xl-top{% endif %} {% if include.last %}rounded-xl-bottom{% endif %}" 
    style="background-color: rgba(255,255,255,0.9);"
  >
    <div class="d-flex align-items-start flex-column py-3 px-4">
      <div class="mb-auto"></div>
      <div>
        <h5 class="mt-0 mb-1 font-weight-normal">{{ item.title }}</h5>

        {% if item.authors %}
          <p class="mt-0 mb-0 small">{% include widgets/author_list.html authors=item.authors %}</p>
        {% endif %}

        {% if item.notes %}
          <p class="mt-0 mb-0 small font-italic text-black">{{ item.notes }}</p>
        {% endif %}

        {% if item.abstract %}
          <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
            <a href="javascript:void(0);" onclick="this.closest('p').nextElementSibling.classList.toggle('d-none')">
              [Show/hide abstract]
            </a>
          </p>
          <p class="mt-1 mb-1 small text-muted" style="text-align: justify;">
            {{ item.abstract }}
          </p>
        {% endif %}
        
        {% if item.links %}
          <p class="small pb-0 mb-0 lh-125 text-muted abstract-links">
            {% for link in item.links %}
              {% assign link_value = link[1] %}
              {% if link_value.url %}
                <a target="{{ link_value.target | default: '_blank' }}" href="{{ link_value.url }}">[{{ link[0] }}]</a>
              {% else %}
                <a target="_blank" href="{{ link_value }}">[{{ link[0] }}]</a>
              {% endif %}
            {% endfor %}
          </p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
